<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>HTML5 播放器</title>
    <style>
      * {
        margin: 0;
      }
      .artplayer-app {
        width: 100vw;
        height: 100vh;
      }
    </style>
  </head>
  <body>
    <div class="artplayer-app"></div>
    <script src="https://cdn.jsdelivr.net/npm/artplayer/dist/artplayer.js"></script>
    <script>
      var datas = GetQueryString("url").split('/')
      const art = new Artplayer({
        container: ".artplayer-app",
        url: GetQueryString("url"),
        title: decodeURI(datas[datas.length - 2]),
        poster: "./assets/sample/poster.jpg",
        volume: 0.7,
        isLive: false,
        muted: false,
        autoplay: true,
        pip: true,
        autoSize: true,
        autoMini: true,
        screenshot: true,
        setting: true,
        loop: false,
        flip: true,
        playbackRate: true,
        aspectRatio: true,
        fullscreen: true,
        fullscreenWeb: true,
        subtitleOffset: true,
        miniProgressBar: true,
        mutex: true,
        backdrop: true,
        playsInline: true,
        autoPlayback: true,
        airplay: true,
        theme: "#23ade5",
        lang: navigator.language.toLowerCase(),
        whitelist: ["*"],
        moreVideoAttr: {
          crossOrigin: "anonymous",
        },
      })

      // 获取URL参数
      function GetQueryString(name) {
      var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
      var r = window.location.search.substr(1).match(reg); //获取url中"?"符后的字符串并正则匹配
      var context = "";
      if (r != null)
      context = r[2];
      reg = null;
      r = null;
      return context == null || context == "" || context == "undefined" ? "" : context;
      // console.log(GetQueryString(url))
      }
      
      alert(GetQueryString("url"));

    </script>
  </body>
</html>
